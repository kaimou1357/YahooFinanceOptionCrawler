<!doctype html>
<meta charset=utf-8>
  <html>
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
  </head>



  <div class="jumbotron">
        <h1>Welcome to the Option-Chain Scraper</h1>
        <form action="/filegenerate" method="get" enctype="multipart/form-data" id = "tickerForm">
                    Ticker:
                    <input type="text" name="inputTicker" id = 'inputTicker' hint = "Ticker Name" />
                    </br>
                    <h5>Expiration Dates</h5>
                    <input type="Submit"/>
        </form>
        </br>
        <select name = "option_expiration" id = 'expiration_dates' form = "tickerForm"></select>

      </div>
  </html>
  <script type=text/javascript>
    var typingTimer;
    var doneTypingInterval = 1000;
    $('#inputTicker').keyup(function(){
      clearTimeout(typingTimer);
      if ($('#inputTicker').val) {
        typingTimer = setTimeout(doneTyping, doneTypingInterval);
      }
    });



    function doneTyping(){
      var $select = $('#expiration_dates');
      $select.empty();
      $.ajax({
        url: '/generate_dates',
        data: {
          'inputTicker' : $("#inputTicker").val()
        },
        type: "GET",
        success: function(response){
          $.each(response, function(key, value){
            $select.append('<option value =' + value + '>' + key + '</option>');
            //alert(value + key);

          })
        }
      })
    }
  </script>
